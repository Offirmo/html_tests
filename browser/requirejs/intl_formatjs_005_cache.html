<!doctype html>
<!-- html base 004 template -->
<!-- js base 002 template -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

	<title>Intl test 005 - Format.js lib : message cache</title>
	<meta name="description" content="">
	<meta name="author" content="Offirmo">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- favicons -->
	<!-- For Modern Browsers with PNG Support -->
	<link rel="icon" href="misc/favicon_16x16.png" type="image/png" />

	<!-- style -->
	<link href="../bower_components/pace/themes/blue/pace-theme-flash.css" rel="stylesheet" />
	<style>
	 /* ... */
	</style>

	<!-- js -->
	<script src="../bower_components/pace/pace.min.js"></script>
	<script>
		console.log('hello from header !');
	</script>
	<script data-main="misc/components.js" src="../bower_components/requirejs/require.js"></script>

</head>
<body>

<div id="content">
	<div class="container">
		<h1 id="header">Intl test 005 - Format.js lib : message cache</h1>
		<p><strong>XXX not working, ES2015 lib not easily usable...</strong></p>
		<p>Loading and calling <a href="http://formatjs.io/">Format.js</a> <a href="http://formatjs.io/github/#core">core</a> lib <a href="https://github.com/yahoo/intl-format-cache
">intl-format-cache</a>...</p>
		<p><strong>(Results are sent to console)</strong></p>
	</div> <!-- /container -->
</div> <!-- /content -->

<noscript>Your browser either does not support JavaScript, or has it turned off.</noscript>
<script>

	console.log('hello from body !');

	main = function()
	{
		console.log('Starting rsrc load...');
		require(
		[
			'lodash',
			'intl-messageformat',
			'intl-relativeformat',
			'intl-format-cache'
		],
		function(_, IntlMessageFormat, IntlRelativeFormat, createIntlFormatCache) {
			// due to how we wrote component.js, we know that document is fully loaded
			console.log('load done !');


			var getNumberFormat = createIntlFormatCache(Intl.NumberFormat);

			var nf1 = getNumberFormat('en');
			var nf2 = getNumberFormat('en');
			var nf3 = getNumberFormat('fr');

			console.log(nf1 === nf2); // => true
			console.log(nf1 === nf3); // => false

			console.log(nf1.format(1000)); // => "1,000"
			console.log(nf3.format(1000)); // => "1 000"
		});
	};
</script>

</body>
</html>
