{
  "name": "tracery",
  "version": "0.6.0",
  "description": "an object structure predicate builder (make functions to test an object's structure)",
  "keywords": [
    "structure",
    "schema",
    "test",
    "document",
    "validation",
    "data"
  ],
  "main": "index.js",
  "directories": {
    "test": "test"
  },
  "scripts": {
    "test": "node node_modules/mocha/bin/mocha"
  },
  "repository": {
    "type": "git",
    "url": "git@github.com:AgileDiagnosis/tracery.git"
  },
  "author": {
    "name": "Agile Diagnosis",
    "email": "hello@agilediagnosis.com"
  },
  "contributors": [
    {
      "name": "jden",
      "email": "jason@denizac.org"
    }
  ],
  "license": "MIT",
  "devDependencies": {
    "chai-interface": "~1.0.1",
    "chai": "~1.5.0",
    "mocha": "~1.8.1"
  },
  "dependencies": {
    "connective": "~1.0.0",
    "ski": "~1.0.0"
  },
  "readme": "# tracery\nan object structure predicate builder (make functions to test an object's structure)\n\nEasily build functions to test properties of objects - useful for validation, verifying data integrity, and application-level schema checking.\n\nFun fact: tracery [\"is the stonework elements that support the glass in a Gothic window.\"](http://en.wikipedia.org/wiki/Tracery)\n\n## usage\n\nDefine a structure with an object mapping between property names and types. Types can be either JavaScript builtins or predicate (boolean-returning) functions - even another `tracery` function, for easy composition. This is very powerful and lets your describe very complex document structures easily.\n\n```js\n    var tracery = require('tracery')\n    var Tags = tracery([String])\n\n    var Movie = tracery({\n      title: String,\n      director: String,\n      year: Number,\n      genre: String,\n      tags: Tags\n    })\n\n    var Flavor = tracery({\n      sour: Boolean,\n      bitter: Boolean,\n      sweet: Boolean,\n      spicy: Boolean\n    })\n\n    var Document = tracery({\n      id: String,\n      movies: [Movie],\n      flavors: tracery.Collection(Flavor)\n    })\n\n    var goodDoc = {\n      id: 'doc123',\n      movies: [{title: 'Born to be born', director: 'Ken Bobson', year: 1982, genre: 'Action', tags: ['cheesy']}],\n      flavors: {\n        'butter popcorn': {sour: false, bitter: false, sweet: false, spicy: false},\n        'wasabi': {sour: false, bitter: false, sweet: false, spicy: true},\n        'sweet and sour shrimp': {sour: true, bitter: false, sweet: true, spicy: false}\n      }\n    }\n\n    Document(goodDoc)\n    // => true\n\n```\n\n### combined types\n\nUsing higher order functions (for example, with [connective](https://github.com/AgileDiagnosis/node-connective)), you can combine predicates to effectively \"mix in\" multiple document types:\n\n```js\n    var and = require('connective').and\n\n    var Person = tracery({\n      name: String\n    })\n\n    var Employee = and(Person, tracery({\n      salary: Number,\n      reportsTo: Person\n    }))\n```\n\n### optional and nullable types\n\nLet's say not every employee has a supervisor. `tracery` has builtin helpers `tracery.Optional` (which can be the value or `undefined`) and `tracery.Nullable` (which can be the value or `null`):\n\n```js\n    var Employee = and(Person, tracery({\n      salary: Number,\n      reportsTo: tracery.Nullable(Person)\n    }))\n\n    Employee({\n      name: 'bob',\n      salary: 10,\n      reportsTo: null\n    })\n    // -> true\n```\n\n### collections\n\nSometimes documents have variable property names, but you'd still like to check that the property values have a specific structure (for example, when using an object as a dictionary or hash table). We can use `tracery.Collection`:\n\n```js\n    var State = tracery({\n      capital: String,\n      counties: tracery.Collection({seat: String, population: Number})\n    })\n\n    var California = {\n      capital: 'Sacramento',\n      counties: {\n        // thanks wikipedia\n        'Alameda': {seat: 'Oakland', population: 1510271},\n        'Alpine': {seat: 'Markleeville', population: 1175}\n      }\n    }\n\n    State(California)\n    // => true\n```\n\n### typed arrays\n\nWe can specify that a property should be an array with any number of elements, all of a given type like so:\n\n```js\n    var Likes = tracery({\n      movies: [Movie],\n      songs: [Song]\n    })\n```\nEmpty arrays will match, but sparse arrays will not. In the case that you really need them:\n\n```js\n    var SparseLikes = tracery({\n      movies: [tracery.Optional(Movie)]\n    })\n```\n\n### no no, I meant builtin type arrays\noh! Well that's great: we support the following builtin types:\n\n```js\n    tracery({\n      a: ArrayBuffer,\n      b: DataView,\n      c: Float32Array,\n      d: Float64Array,\n      e: Int8Array,\n      f: Int16Array,\n      g: Int32Array,\n      h: Uint8Array,\n      i: Uint16Array,\n      j: Uint32Array,\n      k: Date,\n      l: RegExp\n    })\n```\n\n### typed vectors (tuples)\n\nArrays with an expected structure are sometimes used for memory or performance reasons to reprent vectors or tuples. For example, a Cartesian coordinate (10, 20) could be represented as an object as `{x: 10, y: 20}` or as `[10, 20]`. We can specify vectors, which must match in terms of number of elements and type of element at each position, using `tracery.Vector`:\n\n```js\n    var Point = tracery.Vector([Number, Number])\n\n    var Square = tracery.Vector([Point, Point, Point, Point])\n\n    var Circle = tracery({\n      origin: Point,\n      radius: Number\n    })\n````\nSee `test/example.js` for more.\n\n## bonus: type diffing\n\nYou can `require('tracery/diff')` to generate objects diffing betweed expected and actual object structures. If there is no difference, it returns false, otherwise it returns an object structure similar to the object under test, with leaves of `{actual: type, expected: type, actualValue: value}`.\n\nThis module is included in the package, but is not loaded by default. It is useful for debugging and for unit tests.\n\nSee `test/test.diff` for a readable example.\n\n## installation\n\n    $ npm install tracery\n\n## running the tests\n\n    $ npm install\n    $ npm test\n\n## changelog\n0.5.0 - add support for builtin typed arrays, Date, and RegExp objects in type signatures\n0.4.0 - intial public release\n\n## contributors\n\njden <jason@denizac.org>\n\nplease submit pull requests or issues\n\n## license\n\nMIT (c) 2013 Agile Diagnosis. See LICENSE.md",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/AgileDiagnosis/tracery/issues"
  },
  "_id": "tracery@0.6.0",
  "dist": {
    "shasum": "a7bd54dac2d5a35ca0e28145049c7f266e83e25a"
  },
  "_from": "tracery@~0.6.0",
  "_resolved": "https://registry.npmjs.org/tracery/-/tracery-0.6.0.tgz"
}
